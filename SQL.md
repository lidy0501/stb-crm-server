# 员工信息表:
CREATE TABLE CRM_STAFF (
	STAFF_ID char(20) NOT NULL COMMENT '员工ID',
	STAFF_NAME varchar(60) NOT NULL COMMENT '员工姓名',
	STAFF_CODE varchar(20) DEFAULT NULL COMMENT '员工工号,用于账号登录',
	PASSWORD varchar(100) DEFAULT NULL COMMENT '员工密码',
	STAFF_PHONE varchar(16) DEFAULT NULL COMMENT '员工电话',
	STAFF_TYPE char(1) NOT NULL COMMENT '员工类型:0系统管理员,1分销员(由系统管理员创建，并且具有员工管理权限)，2普通员工',
	STAFF_STATE char(1) NOT NULL COMMENT '员工状态：1正常、9离职',
	STAFF_EMAIL varchar(100) DEFAULT NULL COMMENT '邮箱',
	OPERATOR_ID char(20) NOT NULL COMMENT '操作人',
	CREATE_TIME datetime NOT NULL DEFAULT CURRENT_TIMESTAMP COMMENT '创建时间',
	UPDATE_TIME datetime NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP COMMENT '更新时间',
	REMARK varchar(1000) DEFAULT NULL COMMENT '备注',
	PRIMARY KEY (STAFF_ID)
)ENGINE = InnoDB DEFAULT CHARSET = utf8mb4 COMMENT = '员工信息表';

# 权限信息表
CREATE TABLE CRM_RIGHT (
  RIGHT_ID char(20) NOT NULL COMMENT '权限ID',
  RIGHT_CODE varchar(100) NOT NULL COMMENT '权限编码',
  RIGHT_NAME varchar(50) NOT NULL COMMENT '权限名称',
  RIGHT_STATE char(1) NOT NULL COMMENT '状态,1有效,0无效',
  RIGHT_DESC varchar(500) DEFAULT NULL COMMENT '权限说明',
  CREATE_TIME datetime NOT NULL DEFAULT CURRENT_TIMESTAMP COMMENT '创建时间',
  UPDATE_TIME datetime NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP COMMENT '更新时间',
  REMARK varchar(1000) DEFAULT NULL COMMENT '备注',
  PRIMARY KEY (`RIGHT_ID`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COMMENT='系统权限表';

# 员工权限关系表
CREATE TABLE CRM_STAFF_RIGHT (
  STAFF_ID char(20) NOT NULL COMMENT '员工ID',
  RIGHT_ID char(20) NOT NULL COMMENT '权限ID',
  RIGHT_STATE char(1) NOT NULL COMMENT '状态：0无效、1有效',
  OPERATOR_ID char(20) NOT NULL COMMENT '操作人',
  CREATE_TIME datetime NOT NULL DEFAULT CURRENT_TIMESTAMP COMMENT '创建时间',
  UPDATE_TIME datetime NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP COMMENT '更新时间',
  REMARK varchar(1000) DEFAULT NULL COMMENT '备注',
  PRIMARY KEY (`STAFF_ID`,`RIGHT_ID`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COMMENT='员工权限关系表';

# 菜单信息表
CREATE TABLE CRM_MENU (
  MENU_ID char(20) NOT NULL COMMENT '菜单ID',
  MENU_NAME varchar(50) NOT NULL COMMENT '菜单名称',
  MENU_STATE char(1) NOT NULL COMMENT '状态,1有效,0无效',
  MENU_DESC varchar(500) DEFAULT NULL COMMENT '菜单说明',
  MENU_URL varchar(250) DEFAULT NULL COMMENT 'URL',
  CREATE_TIME datetime NOT NULL DEFAULT CURRENT_TIMESTAMP COMMENT '创建时间',
  UPDATE_TIME datetime NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP COMMENT '更新时间',
  REMARK varchar(1000) DEFAULT NULL COMMENT '备注',
  PRIMARY KEY (`MENU_ID`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COMMENT='菜单表';

# 权限菜单关系表
CREATE TABLE CRM_RIGHT_MENU (
  RIGHT_ID char(20) NOT NULL COMMENT '权限ID',
  MENU_ID char(20) NOT NULL COMMENT '菜单ID',
  CREATE_TIME datetime NOT NULL DEFAULT CURRENT_TIMESTAMP COMMENT '创建时间',
  UPDATE_TIME datetime NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP COMMENT '更新时间',
  REMARK varchar(1000) DEFAULT NULL COMMENT '备注',
  PRIMARY KEY (`RIGHT_ID`,`MENU_ID`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COMMENT='权限菜单关系表';

# 客户信息表
CREATE TABLE CRM_USER (
	USER_ID char(20) NOT NULL COMMENT '客户ID',
	USER_CODE varchar(45) NOT NULL COMMENT '客户编码',
    USER_NAME varchar(60) DEFAULT NULL COMMENT '客户名称',
    NATION varchar(20) DEFAULT NULL COMMENT '客户国家',
    USER_PHONE varchar(32) DEFAULT NULL COMMENT '客户电话',
    USER_TELEPHONE varchar(32) DEFAULT NULL COMMENT '客户固定电话',
    USER_EMAIL varchar(45) DEFAULT NULL COMMENT '客户邮箱',
    COMPANY varchar(100) DEFAULT NULL COMMENT '客户公司名称',
    COMPANY_ADDRESS varchar(100) DEFAULT NULL COMMENT '客户公司地址',
    COMPANY_WEB varchar(100) DEFAULT NULL COMMENT '客户公司网址',
    POST varchar(100) DEFAULT NULL COMMENT '公司职位',
    USER_TYPE char(1) NOT NULL COMMENT '客户类型：0公共区域、1私有区域',
    USER_STATE char(1) NOT NULL COMMENT '客户状态：0无效 1有效',
    OPERATOR_ID char(20) NOT NULL COMMENT '操作人',
	CREATE_TIME datetime NOT NULL DEFAULT CURRENT_TIMESTAMP COMMENT '创建时间',
	UPDATE_TIME datetime NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP COMMENT '更新时间',
	FOLLOW_TIME datetime NOT NULL DEFAULT CURRENT_TIMESTAMP COMMENT '跟进时间',
	SUBTOTAL varchar(1000) DEFAULT NULL COMMENT '跟进小计',
	REMARK varchar(1000) DEFAULT NULL COMMENT '备注',
	PRIMARY KEY(USER_ID)
)ENGINE = InnoDB DEFAULT CHARSET = utf8mb4 COMMENT = '客户信息表';

# 订单管理表
CREATE TABLE CRM_ORDER (
	ORDER_ID char(20) NOT NULL COMMENT '订单ID',
	USER_ID char(20) DEFAULT NULL COMMENT '客户ID',
	USER_NAME varchar(60) DEFAULT NULL COMMENT '客户姓名',
	COMPANY varchar(100) DEFAULT NULL COMMENT '公司名称',
	OPERATOR_ID char(20) NOT NULL COMMENT '跟单人ID',
	PRODUCT_NAME varchar(100) NOT NULL COMMENT '产品名称',
	PRODUCT_SPE varchar(100) DEFAULT NULL COMMENT '产品规格',
	PRODUCT_NUM int DEFAULT NULL COMMENT '产品数量',
	ORDER_STATE char(1) NOT NULL COMMENT '0:未完成 1:已完成 9:删除',
	PAY_TYPE varchar(32) DEFAULT NULL COMMENT '支付方式',
	TOTAL_FEE int DEFAULT NULL COMMENT '订单应付总金额',
	DOWN_PAY_FEE int DEFAULT NULL COMMENT '首付款',
	FINAL_PAY_FEE int DEFAULT NULL COMMENT '尾款',
	PAY_PROGRESS varchar(200) DEFAULT NULL COMMENT '付款进度',
	DELIVERY_TIME varchar(100) DEFAULT NULL COMMENT '交期',
	DELIVERY_NO varchar(50) DEFAULT NULL COMMENT '物流单号',
	PAY_RECORD varchar(1000) DEFAULT NULL COMMENT '付款记录',
	CREATE_TIME datetime NOT NULL DEFAULT CURRENT_TIMESTAMP COMMENT '订单生成时间',
	UPDATE_TIME datetime NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP COMMENT '更新时间，订单有变更时更新',
	REMARK varchar(1000) DEFAULT NULL COMMENT '备注',
	PRIMARY KEY(ORDER_ID)
)ENGINE = InnoDB DEFAULT CHARSET = utf8mb4 COMMENT = '订单管理表';

# 商品信息表
CREATE TABLE CRM_GOODS(
		GOODS_ID char(20) NOT NULL COMMENT '商品ID',
		GOODS_CODE varchar(45) NOT NULL COMMENT '商品编码',
		GOODS_NAME varchar(50) NOT NULL COMMENT '商品名称',
        GOODS_PRICE int default 0 NOT NULL comment '商品价格: 单位  分',
		SKU_ID char(20) NOT NULL COMMENT '商品对应的sku_id',
		GOODS_STATE char(1) Default '1' NOT NULL COMMENT '0:已删除 1:未删除',
		OPERATOR_ID char(20) NOT NULL COMMENT '操作人',
		CREATE_TIME datetime NOT NULL DEFAULT CURRENT_TIMESTAMP COMMENT '创建时间',
		UPDATE_TIME datetime NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP COMMENT '更新时间',
		REMARK varchar(1000) DEFAULT NULL COMMENT '备注',
		PRIMARY KEY(GOODS_ID)
)ENGINE = InnoDB DEFAULT CHARSET = utf8mb4 COMMENT = '商品信息表';

# 商品SKU表
CREATE TABLE CRM_SKU(
		SKU_ID char(20) NOT NULL COMMENT 'SKUID',
		SKU_CODE varchar(45) NOT NULL COMMENT 'SKU编码',
		SKU_UNIT varchar(20) NOT NULL COMMENT '单位',
		SKU_COLOR varchar(20) NOT NULL COMMENT '花色',
		SKU_STATE char(1) default '1' not null comment '0:无效 1:有效',
		OPERATOR_ID char(20) NOT NULL COMMENT '操作人',
		CREATE_TIME datetime NOT NULL DEFAULT CURRENT_TIMESTAMP COMMENT '创建时间',
		UPDATE_TIME datetime NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP COMMENT '更新时间',
		REMARK varchar(1000) DEFAULT NULL COMMENT '备注',
		PRIMARY KEY(SKU_ID)
)ENGINE = InnoDB DEFAULT CHARSET = utf8mb4 COMMENT = '商品SKU表';

# 订单商品关联表
CREATE TABLE CRM_ORDER_GOODS(
        ORDER_ID CHAR(20) NOT NULL COMMENT '订单ID',
        GOODS_ID CHAR(20) NOT NULL COMMENT '商品ID',
        AMOUNT INT DEFAULT 0 NOT NULL COMMENT '商品数量,默认0',
        STATE CHAR(1) DEFAULT '1' NOT NULL COMMENT '状态,0,无效,1,有效 默认1',
        OPERATOR_ID CHAR(20) NOT NULL COMMENT '操作员',
        CREATE_TIME datetime NOT NULL DEFAULT CURRENT_TIMESTAMP COMMENT '创建时间',
        UPDATE_TIME datetime NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP COMMENT '更新时间',
        PRIMARY KEY(ORDER_ID,GOODS_ID)
)ENGINE = InnoDB DEFAULT CHARSET = utf8mb4 COMMENT = '订单商品关系表';

# 合同信息表
CREATE TABLE CRM_CONTRACT(
		CONTRACT_ID char(20) NOT NULL COMMENT '合同ID',
		CONTRACT_CODE varchar(50) NOT NULL COMMENT '合同编号',
		CREATE_TIME datetime NOT NULL DEFAULT CURRENT_TIMESTAMP COMMENT '创建时间',
		UPDATE_TIME datetime NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP COMMENT '更新时间',
		REMARK varchar(1000) DEFAULT NULL COMMENT '备注',
		PRIMARY KEY(CONTRACT_ID)
)ENGINE = InnoDB DEFAULT CHARSET = utf8mb4 COMMENT = '合同信息表';



#基础数据准备

# 1 插入系统管理员
insert into CRM_STAFF(STAFF_ID, STAFF_NAME, STAFF_CODE, PASSWORD, STAFF_PHONE, STAFF_TYPE, STAFF_STATE, STAFF_EMAIL, OPERATOR_ID, CREATE_TIME, UPDATE_TIME, REMARK) values(
'00000000000000000000', 'admin', 'A000', 'admin', '15311111111', '0', '1', 'admin@163.com', '00000000000000000000', '2020-06-22 22:34:14', '2020-06-22 22:39:22', '系统管理员');

# 2 插入权限表
insert into CRM_RIGHT(RIGHT_ID,	RIGHT_CODE,	RIGHT_NAME,	RIGHT_STATE, RIGHT_DESC)
values('00000000001111111100',	'RI000', '员工管理',	'1', '员工管理'), 
	  ('00000000001111111101',	'RI001', '客户管理',	'1', '客户管理'),
	  ('00000000001111111102',	'RI002', '订单管理',	'1', '订单管理'),
	  ('00000000001111111103',	'RI003', '商品管理',	'1', '商品管理'),
	  ('00000000001111111104',	'RI004', '合同管理',	'1', '合同管理'),
	  ('00000000001111111105',	'RI005', '财务管理',	'1', '财务管理');
	  
# 3 插入菜单表
insert into CRM_MENU(MENU_ID, MENU_NAME, MENU_STATE, MENU_DESC, MENU_URL) values    
('00000000002222222200', '员工列表', '1', '员工列表', '/manage/staff-list'),               
('00000000002222222201', '新增员工', '1', '新增员工', '/manage/add-staff'),                
('00000000002222222202', '公司客户', '1', '公司客户', '/manage/private-user-list'),        
('00000000002222222203', '公海客户', '1', '公海客户', '/manage/public-user-list'),         
('00000000002222222204', '新增客户', '1', '新增客户', '/manage/add-user'),                 
('00000000002222222205', '订单列表', '1', '订单列表', '/manage/order-list'),               
('00000000002222222206', '新增订单', '1', '新增订单', '/manage/add-order'),
('00000000002222222207', '商品列表', '1', '商品列表', '/manage/goods-list'),
('00000000002222222208', '新增商品', '1', '商品列表', '/manage/add-goods'),
('00000000002222222209', '合同列表', '1', '合同列表', '/manage/contract-list'),
('00000000002222222210', '新增合同', '1', '新增合同', '/manage/add-contract'),
('00000000002222222211', '财务管理', '1', '财务管理', '/manage/finance-manage'),          
('00000000002222222212', 'SKU设置', '1', 'SKU设置', '/manage/sku-set');          

# 4 插入 员工权限表
 insert into CRM_STAFF_RIGHT(STAFF_ID, RIGHT_ID, RIGHT_STATE, OPERATOR_ID) values            
 ('00000000000000000000', '00000000001111111100', '1', '00000000000000000000'),              
 ('00000000000000000000', '00000000001111111101', '1', '00000000000000000000'),              
 ('00000000000000000000', '00000000001111111102', '1', '00000000000000000000'),
 ('00000000000000000000', '00000000001111111103', '1', '00000000000000000000'),
 ('00000000000000000000', '00000000001111111104', '1', '00000000000000000000'),
 ('00000000000000000000', '00000000001111111105', '1', '00000000000000000000'); 
 
 
# 5 插入权限菜单表
insert into CRM_RIGHT_MENU(RIGHT_ID, MENU_ID) values
('00000000001111111100', '00000000002222222200'),
('00000000001111111100', '00000000002222222201'),
('00000000001111111101', '00000000002222222202'),
('00000000001111111101', '00000000002222222203'),
('00000000001111111101', '00000000002222222204'),
('00000000001111111102', '00000000002222222205'), 
('00000000001111111102', '00000000002222222206'),
('00000000001111111103', '00000000002222222207'),
('00000000001111111103', '00000000002222222208'),
('00000000001111111103', '00000000002222222212'),
('00000000001111111104', '00000000002222222209'),
('00000000001111111104', '00000000002222222210'),
('00000000001111111105', '00000000002222222211');                 
                                                                                             










